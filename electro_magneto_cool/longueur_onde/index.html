<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device_width, initial-scale=1.0">

  
  <title>ğŸ‘„â†ğŸ¤â†ğŸ“ˆâ†ğŸ“¡â†ğŸ“¡â†ğŸ“ˆâ†ğŸ“»â†ğŸ‘‚</title>
  <link rel="icon" type="image/png" href="img_4.png" />
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="style_menu.css"> 


</head>

<body id="body">

<div id="gauche" style="justify-content:center; display:grid" class="partie">
  

  <svg viewBox="0 0 700 600" id="waveSvg">
  <path id="sineWave" />
  <path id="horizontalWave" />
<line id="horizontalLine" x1="0" y1="290" x2="250" y2="290" />
<line id="verticalLineRight" x1="250" y1="130" x2="250" y2="290" style="stroke-dasharray:5,5;"/>
  <line x1="0" y1="130" x2="0" y2="290" style="stroke-dasharray:5,5;"/>
  <rect id="antenna" width="3" height="250" x="600" y="140" style="fill: white; stroke: black; display: none;" />
</svg>
<div id="longueur_onde_fond"><p>la longueur d'onde </div>
<div id="longueur_onde"><p>la longueur d'onde </div>


<div id="info"  style=" ">

  <div class="sous_texte" style=""><p>la longueur d'onde est la distance entre deux points identiques d'une onde pÃ©riodique.</p></div>
  <button id="bouton_signal" style="" onclick='antenne()'>ajouter une antenne</button>

</div>


<rect class="d" x=".5" y=".5" width="3" height="115.92"/></rect>


<div id="controls" style="margin-top: 40px;">
  <label for="wavelengthSlider">Longueur d'onde : </label>
  <input type="range" id="wavelengthSlider" min="100" max="400" value="250" step="10">
  <span id="wavelengthValue">250</span> px
  <br>
  <small>taille de l'antenne : <span id="antennaSize">125</span> px</small>
<div id="antennaTypes" style="margin-top: 15px; display: none;">
  <p><strong>Type d'antenne :</strong></p>
  <button id="btnHalfWave" class="antenna-btn active" onclick="changeAntennaType(0.5)">Demi-onde</button>
  <button id="btnQuarterWave" class="antenna-btn" onclick="changeAntennaType(0.25)">Quart d'onde</button>
  <button id="btnFullWave" class="antenna-btn" onclick="changeAntennaType(1)">Onde complÃ¨te</button>
</div>



</div>


</div>


 </div>







<script type="text/javascript">

  ///////////////////////ANIM LONGUEUR D'ONDE//////////////////////////////////

const svgWidth = 700;
const svgHeight = 600;
const amplitude = 40;
let wavelength = 250; // maintenant variable
const waveCenter = 200;
const speed = 2; // pixels par frame (vitesse de dÃ©calage vers la droite)
const step = 2; // pas horizontal entre points
let frequency = 2 * Math.PI / wavelength; // sera recalculÃ©
let antennaRatio = 1; // Î»/2 pour une antenne dipÃ´le

const pathElem = document.getElementById('sineWave');
const horizontalPathElem = document.getElementById('horizontalWave');
const antennaElem = document.getElementById('antenna');
const horizontalLineElem = document.getElementById('horizontalLine');
const verticalLineRightElem = document.getElementById('verticalLineRight');
const antennaX = 600; // position X de l'antenne

let phase = 0;
let isHighlighted = false;
let highlightTimeout = null;
let isAnimating = false; // Variable pour contrÃ´ler l'animation
let antennaVisible = false; // Variable pour savoir si l'antenne est visible
let waveExtent = 250; // Nouvelle variable pour contrÃ´ler l'Ã©tendue de l'onde

function generatePath(phase, maxX) {
  let d = "";
  let started = false;
  // Utiliser waveExtent au lieu de maxX fixe
  const endX = maxX || waveExtent;
  
  for(let x = 0; x <= endX; x += step) {
    let y = waveCenter + amplitude * Math.sin(frequency * (x - phase));
    if (!started) {
      d += `M ${x} ${y}`;
      started = true;
    } else {
      d += ` L ${x} ${y}`;
    }
  }
  return d;
}

function checkWaveAtAntenna() {
  // VÃ©rifier seulement si l'onde a atteint l'antenne
  if (waveExtent >= antennaX && antennaVisible) {
    // Calculer la valeur de la sinusoÃ¯de Ã  la position de l'antenne
    const waveValueAtAntenna = Math.sin(frequency * (antennaX - phase));
    
    // DÃ©tecter si on est proche du maximum OU du minimum (avec une petite tolÃ©rance)
    if ((waveValueAtAntenna < -0.95) && !isHighlighted) {
      // Activer le surlignage
      antennaElem.classList.add('antenna-highlight');
      isHighlighted = true;
      
      // Programmer l'arrÃªt du surlignage aprÃ¨s 500ms
      highlightTimeout = setTimeout(() => {
      antennaElem.style.transition = 'all 0.2s ease';
        antennaElem.classList.remove('antenna-highlight');
        isHighlighted = false;
      }, 200);
    }
  }
}

function animate() {
  if (isAnimating) {
    phase += speed;
    // Faire grandir l'onde progressivement jusqu'Ã  l'antenne
    if (waveExtent < antennaX) { // +50 pour dÃ©passer un peu l'antenne
      waveExtent += speed; // L'onde grandit Ã  la mÃªme vitesse que la phase
    }
    pathElem.setAttribute('d', generatePath(phase));
    checkWaveAtAntenna();
  } else {
    // Onde statique au dÃ©part, limitÃ©e Ã  la longueur d'onde visible
    pathElem.setAttribute('d', generatePath(0, Math.min(waveExtent, wavelength * 2)));
  }
  requestAnimationFrame(animate);
}

// Fonction pour mettre Ã  jour l'onde quand on change la longueur d'onde
function updateWave() {
  wavelength = parseInt(document.getElementById('wavelengthSlider').value);
  frequency = 2 * Math.PI / wavelength;
  
  // Mettre Ã  jour l'affichage
  document.getElementById('wavelengthValue').textContent = wavelength;
  document.getElementById('antennaSize').textContent = Math.round(wavelength * antennaRatio);

// Animer les barres de longueur d'onde
horizontalLineElem.setAttribute('x2', wavelength);
verticalLineRightElem.setAttribute('x1', wavelength);
verticalLineRightElem.setAttribute('x2', wavelength);

  
  // Redimensionner l'antenne si elle est visible
// Redimensionner l'antenne si elle est visible
if (antennaVisible) {
  const newAntennaHeight = wavelength * antennaRatio;
  antennaElem.setAttribute('height', newAntennaHeight);
  // Garder le haut fixe Ã  y=120
  antennaElem.setAttribute('y', 120);
}
  
  // Si l'animation n'est pas en cours, redessiner l'onde statique
  if (!isAnimating) {
    pathElem.setAttribute('d', generatePath(phase, Math.min(waveExtent, wavelength * 2)));
  }
}

// Event listener pour le slider
document.getElementById('wavelengthSlider').addEventListener('input', updateWave);

// Initialiser l'onde statique
animate();

///////////////////////POSITION texte//////////////////////////////////

// Attendre que jQuery soit chargÃ©
function initMouseMove() {
  if (typeof $ !== 'undefined') {
    $(function() {
      $('#body').mousemove(function(e) {
        var x = e.pageX;
        var y = e.pageY;
        var mid = $(window).height();
        var midW =$(window).width()/2;
        // var docHeight = $(document).height();

        $('.legende').css('top', y+50+'px');
        $('.legende').css('left', x-20+'px');
      });
    });
  } else {
    // RÃ©essayer dans 100ms si jQuery n'est pas encore chargÃ©
    setTimeout(initMouseMove, 100);
  }
}

// Lancer l'initialisation
initMouseMove();

////////////////////////APPARITION ET BOUTON////////////////////
function antenne(){
  if (!antennaVisible) {
    // Premier clic : ajouter l'antenne avec la bonne taille
    const antennaHeight = wavelength * antennaRatio;
    
    antennaElem.setAttribute('height', antennaHeight);
    antennaElem.setAttribute('y', 140);
    $('#antenna').css('display','block');
    document.getElementById("bouton_signal").textContent = ">>>";
    antennaVisible = true;
    $('#antennaTypes').css('display', 'flex');
    document.querySelector('.sous_texte p').textContent = 
      "l'antenne mesure la taille de pour entrer en rÃ©sonance optimale avec l'onde. Changez la longueur d'onde pour voir l'antenne s'adapter !";
    document.getElementById("bouton_signal").textContent = "lancer le signal";
  } else {
    // DeuxiÃ¨me clic : lancer le signal
    isAnimating = true;
    waveExtent = Math.min(250, wavelength); // RÃ©initialiser l'Ã©tendue de l'onde au dÃ©marrage
    document.getElementById("bouton_signal").textContent = "signal lancÃ©";
    document.getElementById("bouton_signal").style.opacity = "0";
    document.querySelector('.sous_texte p').textContent = 
      "Plus la longueur d'onde est grande, plussa vitesse de propagation est lente mais ira plus loin et inversement.";
  }
}


function changeAntennaType(ratio) {
  antennaRatio = ratio;
  
  // Mettre Ã  jour l'affichage
  updateWave();
  
  // Changer le bouton actif
  document.querySelectorAll('.antenna-btn').forEach(btn => btn.classList.remove('active'));
  if (ratio === 0.5) document.getElementById('btnHalfWave').classList.add('active');
  else if (ratio === 0.25) document.getElementById('btnQuarterWave').classList.add('active');
  else if (ratio === 1) document.getElementById('btnFullWave').classList.add('active');
}


</script>
</body>
  </html>